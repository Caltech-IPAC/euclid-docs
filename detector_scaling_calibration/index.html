<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Science goals for SIR Detector Scaling &mdash; SIR_DetectorScalingCalibration August-2025 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/documentation_options.js?v=c780cd6e"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SIR_DetectorScalingCalibration" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> SIR_DetectorScalingCalibration
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Code Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">SIR_DetectorScalingCalibration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">SIR_DetectorScalingCalibration</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Science goals for SIR Detector Scaling</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="science-goals-for-sir-detector-scaling">
<h1>Science goals for SIR Detector Scaling<a class="headerlink" href="#science-goals-for-sir-detector-scaling" title="Link to this heading"></a></h1>
<p>SIR Detector Scaling has two components - a calibration module and an apply module. In totality,
the goal is to apply a multiplicative correction to the detector response to a uniform illumination.
The correction is applied and tailored to each detector. This correction attempts to reduce
detector-dependent variations on different spatial scales including:</p>
<ol class="loweralpha simple">
<li><p>Pixel-to-pixel variations resulting from intrinsic QE differences across each detector.</p></li>
<li><p>Small scale (~ 100 px) QE variations due to repeatable structures in the background detector response
which are present at the few percent level in localized areas on each detector. These “void” structures
are very repeatable and relate to missing epoxy layers in the manufacture of the H2RG detectors.</p></li>
<li><p>Large scales QE corrections (&gt; 100 px, up to detector scale), to account for detector-scale intrinsic
gradients in the response of the detector to uniform light. The magnitude of these variations are generally
small (&lt; 1-2%) and vary from one detector to another.</p></li>
</ol>
<p>This specific documentation handles only the calibration module, appropriately named as
SIR_DetectorScalingCalibration, where the calibration product is generated. In the apply module, this
calibration product is applied. For the apply module, please visit
<a class="reference external" href="https://caltech-ipac.github.io/euclid-docs/detector_scaling_apply/">https://caltech-ipac.github.io/euclid-docs/detector_scaling_apply/</a></p>
</section>
<section id="documentation-for-sir-detectorscalingcalibration-calibration-module">
<h1>Documentation for SIR DetectorScalingCalibration (calibration module)<a class="headerlink" href="#documentation-for-sir-detectorscalingcalibration-calibration-module" title="Link to this heading"></a></h1>
<p>In this document, you will find the documentation for Euclid’s SIR DetectorScalingCalibration module
as well as documentation for the underlying Python classes. This module derives a pixel-wise multiplication
correction factor to the detector response to a uniform illumination and is tailored to each detector. This
multiplication factor, generated as a 2D map, is needed as input by the SIR DetectorScaling (apply) module
under SIR Pipeline.</p>
<p>The output calibration product has both blue and red grism specific correction factors which can be accessed
via FITS extension name with structure ‘DET_{det_id}.{grism}.FLAT’ where det_id runs from 11, 21, …. 43,
44 and grism can be ‘RGS’ or ‘BGS’. As input, we use <span class="math notranslate nohighlight">\({\alpha}\)</span> values -0.9 for RGS and
-0.75 for BGS.</p>
<p>First, the code opens one QE input FITS file to read in the full wavelength range for which it was tested
in the lab. This full wavelength range remains the same for all 16 detectors. Then, opening the grism
tranmission curves file, it estimates the specific section of the wavelength range for which the
transmission curve throughput is more than 10% of its maximum throughput value, for a specific detector.
This wavelength range is set as the useful wavelength range, <span class="math notranslate nohighlight">\(\lambda_\text{useful}\)</span> for a specific detector.
Transmission values are calculated from the input grism transmission curve, at various points of
<span class="math notranslate nohighlight">\(\lambda_\text{useful}\)</span>, by interpolating with a cubic function.</p>
<p>This <span class="math notranslate nohighlight">\(\lambda_\text{useful}\)</span>, interpolated transmission values and the (grism specific) alpha are
used to calculate the weights for Quantum Efficiency (QE) values for each <span class="math notranslate nohighlight">\(\lambda_\text{useful}\)</span>.
We used median Zody spectrum intensity <span class="math notranslate nohighlight">\(I_{\nu} \propto \lambda^{\alpha}\)</span> to calculate
the weights. These wavelength-specific weights are then multiplied to the corresponding
wavelength-specific 2D QE input maps to generated wavelength-specific weighted 2D QE maps. Subsequently,
these wavelength-specific weighted 2D QE maps are summed over all <span class="math notranslate nohighlight">\(\lambda_\text{useful}\)</span>, and
normalized, to generate the final weighted 2D QE maps per detector.</p>
</section>
<section id="module-usage">
<h1>Module Usage<a class="headerlink" href="#module-usage" title="Link to this heading"></a></h1>
<p>The full details of the latest command-line usage documentation can always be found, using the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>E-Run<span class="w"> </span>SIR_Calibration<span class="w"> </span>SIR_DetectorScalingCalibration<span class="w"> </span>--help
</pre></div>
</div>
<p>In summary, the most important command-line switches and arguments, when running the module in stand-alone mode, are:</p>
<section id="inputs-and-outputs">
<h2>Inputs and Outputs<a class="headerlink" href="#inputs-and-outputs" title="Link to this heading"></a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--workdir</span> <span class="pre">WORKDIR</span></code></dt><dd><p>The root working directory where all of the files are located.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">CONFIG</span></code></dt><dd><p>The name of the configuration file, relative to the <code class="docutils literal notranslate"><span class="pre">workdir</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--logdir</span> <span class="pre">LOGDIR</span></code></dt><dd><p>The name of the logging directory, relative to the <code class="docutils literal notranslate"><span class="pre">workdir</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--mdb</span> <span class="pre">MDB</span></code></dt><dd><p>The Mission Database XML file, containing all key instrument and mission parameters, relative to the <code class="docutils literal notranslate"><span class="pre">workdir</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--outfile</span> <span class="pre">OUTPUT</span></code></dt><dd><p>The name of the output FITS file, containing 2D weighted QE maps, for all 16 detectors, for both RGS and BGS grisms, relative to
the <code class="docutils literal notranslate"><span class="pre">workdir</span></code>.</p>
</dd>
</dl>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Code Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">SIR_DetectorScalingCalibration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SIR_DetectorScalingCalibration.html">SIR_DetectorScalingCalibration package</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
<section id="example-run">
<h1>Example Run<a class="headerlink" href="#example-run" title="Link to this heading"></a></h1>
<p>An example run can be submitted with the following command,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>E-Run<span class="w"> </span>SIR_Calibration<span class="w"> </span>CreateDetectorScalingFile<span class="w"> </span>--workdir<span class="w"> </span>/stage/euclid-staff-idas/dev-SIR/Ranga-project-data/data_all<span class="w"> </span>--outfile<span class="w"> </span>test_resources<span class="w"> </span>--mdb<span class="w"> </span>input/EUC_MDB_MISSIONCONFIGURATION_DEV_2023-12-15-1.xml
</pre></div>
</div>
</section>
<section id="activity-flow-diagram">
<h1>Activity Flow Diagram<a class="headerlink" href="#activity-flow-diagram" title="Link to this heading"></a></h1>
<figure class="align-default" id="id1">
<img alt="Detector Scaling activity flow diagram :scale: 50%" src="_images/activity-CAL-DS.png" />
<figcaption>
<p><span class="caption-text">Detector Scaling activity flow diagram</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="index">
<h1>Index<a class="headerlink" href="#index" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-right" title="SIR_DetectorScalingCalibration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Indrajit Das, Phil Appleton, Nathaniel R. Stickley, Ranga-Ram Chary.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>